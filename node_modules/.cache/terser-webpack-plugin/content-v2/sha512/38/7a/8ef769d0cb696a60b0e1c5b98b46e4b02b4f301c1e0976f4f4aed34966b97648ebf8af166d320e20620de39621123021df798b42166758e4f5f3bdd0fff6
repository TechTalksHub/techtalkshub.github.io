{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{291:function(t,s,a){\"use strict\";a.r(s);var n=a(14),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":t.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"ğŸ‘ğŸ»-map-åº•å±‚åŸç†\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ»-map-åº•å±‚åŸç†\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ» Map åº•å±‚åŸç†\")]),t._v(\" \"),s(\"blockquote\",[s(\"p\",[t._v(\"åŸæ–‡é“¾æ¥ï¼šhttps://mp.weixin.qq.com/s/UT8tydajjOUJkfc-Brcblw\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ğŸ‘ğŸ¾-map-çš„åº•å±‚å†…å­˜æ¨¡å‹\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ¾-map-çš„åº•å±‚å†…å­˜æ¨¡å‹\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ¾ Map çš„åº•å±‚å†…å­˜æ¨¡å‹\")]),t._v(\" \"),s(\"p\",[t._v(\"åœ¨ golang çš„æºç ä¸­è¡¨ç¤º map çš„åº•å±‚ struct æ˜¯ hmapï¼Œå…¶æ˜¯ hashmap çš„ç¼©å†™\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"type\")]),t._v(\" hmap \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"struct\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// mapä¸­å­˜å…¥å…ƒç´ çš„ä¸ªæ•°ï¼Œ golangä¸­è°ƒç”¨len(map)çš„æ—¶å€™ç›´æ¥è¿”å›è¯¥å­—æ®µ\")]),t._v(\"\\n   count     \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"int\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// çŠ¶æ€æ ‡è®°ä½ï¼Œé€šè¿‡ä¸å®šä¹‰çš„æšä¸¾å€¼è¿›è¡Œ&æ“ä½œå¯ä»¥åˆ¤æ–­å½“å‰æ˜¯å¦å¤„äºè¿™ç§çŠ¶æ€\")]),t._v(\"\\n   flags     \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint8\")]),t._v(\"\\n   B         \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint8\")]),t._v(\"  \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// 2^B è¡¨ç¤ºbucketçš„æ•°é‡ï¼Œ B è¡¨ç¤ºå–hashåå¤šå°‘ä½æ¥åšbucketçš„åˆ†ç»„\")]),t._v(\"\\n   noverflow \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint16\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// overflow bucket çš„æ•°é‡çš„è¿‘ä¼¼æ•°\")]),t._v(\"\\n   hash0     \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint32\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// hash seed ï¼ˆhash ç§å­ï¼‰ ä¸€èˆ¬æ˜¯ä¸€ä¸ªç´ æ•°\")]),t._v(\"\\n\\n   buckets    unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å…±æœ‰2^Bä¸ª bucket ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰å…ƒç´ å­˜å…¥ï¼Œè¿™ä¸ªå­—æ®µå¯èƒ½ä¸ºnil\")]),t._v(\"\\n   oldbuckets unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// åœ¨æ‰©å®¹æœŸé—´ï¼Œå°†æ—§çš„bucketæ•°ç»„æ”¾åœ¨è¿™é‡Œï¼Œ æ–°bucketsä¼šæ˜¯è¿™ä¸ªçš„ä¸¤å€å¤§\")]),t._v(\"\\n   nevacuate  \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uintptr\")]),t._v(\"        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// è¡¨ç¤ºå·²ç»å®Œæˆæ‰©å®¹è¿ç§»çš„bucketçš„æŒ‡é’ˆï¼Œ åœ°å€å°äºå½“å‰æŒ‡é’ˆçš„bucketå·²ç»è¿ç§»å®Œæˆ\")]),t._v(\"\\n\\n   extra \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"mapextra \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// optional fields\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),s(\"br\")])]),s(\"p\",[t._v(\"B æ˜¯ buckets æ•°ç»„çš„é•¿åº¦çš„å¯¹æ•°ï¼Œ å³ bucket æ•°ç»„çš„é•¿åº¦æ˜¯ 2^Bã€‚bucket çš„æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘äº†ä¸€ç‰‡å†…å­˜ç©ºé—´ï¼Œå…¶æŒ‡å‘çš„ struct å¦‚ä¸‹æ‰€ç¤ºï¼š\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// A bucket for a Go map.\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"type\")]),t._v(\" bmap \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"struct\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n   tophash \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"bucketCnt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint8\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\")])]),s(\"p\",[t._v(\"ä½†è¿™åªæ˜¯è¡¨é¢(src/runtime/hashmap.go)çš„ç»“æ„ï¼Œç¼–è¯‘æœŸé—´ä¼šç»™å®ƒåŠ æ–™ï¼ŒåŠ¨æ€åœ°åˆ›å»ºä¸€ä¸ªæ–°çš„ç»“æ„ï¼š\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"type\")]),t._v(\" bmap \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"struct\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    topbits  \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"8\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uint8\")]),t._v(\"\\n    keys     \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"8\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"keytype\\n    values   \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"8\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\"valuetype\\n    pad      \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uintptr\")]),t._v(\"        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å†…å­˜å¯¹é½ä½¿ç”¨ï¼Œå¯èƒ½ä¸éœ€è¦\")]),t._v(\"\\n    overflow \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"uintptr\")]),t._v(\"        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å½“bucket çš„8ä¸ªkey å­˜æ»¡äº†ä¹‹å\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\")])]),s(\"p\",[t._v(\"bmap å°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„â€œæ¡¶â€çš„åº•å±‚æ•°æ®ç»“æ„ï¼Œ ä¸€ä¸ªæ¡¶ä¸­å¯ä»¥å­˜æ”¾æœ€å¤š 8 ä¸ª key/value, map ä½¿ç”¨ hash å‡½æ•° å¾—åˆ° hash å€¼å†³å®šåˆ†é…åˆ°å“ªä¸ªæ¡¶ï¼Œ ç„¶ååˆä¼šæ ¹æ® hash å€¼çš„é«˜ 8 ä½æ¥å¯»æ‰¾æ”¾åœ¨æ¡¶çš„å“ªä¸ªä½ç½® å…·ä½“çš„ map çš„ç»„æˆç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\\n\"),s(\"img\",{attrs:{src:\"/image/usual_tech/go/bmap.jpeg\",alt:\"bmap\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ğŸ‘ğŸ¾-map-çš„å­˜ä¸å–\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ¾-map-çš„å­˜ä¸å–\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ¾ Map çš„å­˜ä¸å–\")]),t._v(\" \"),s(\"p\",[t._v(\"åœ¨ map ä¸­å­˜ä¸å–æœ¬è´¨ä¸Šéƒ½æ˜¯åœ¨è¿›è¡Œä¸€ä¸ªå·¥ä½œï¼Œ é‚£å°±æ˜¯:\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[t._v(\"æŸ¥è¯¢å½“å‰ k/v åº”è¯¥å­˜å‚¨çš„ä½ç½®ã€‚\")]),t._v(\" \"),s(\"li\",[t._v(\"èµ‹å€¼/å–å€¼ï¼Œ æ‰€ä»¥æˆ‘ä»¬ç†è§£äº† map ä¸­ key çš„å®šä½æˆ‘ä»¬å°±ç†è§£äº†å­˜å–ã€‚\")])]),t._v(\" \"),s(\"h3\",{attrs:{id:\"åº•å±‚ä»£ç \"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#åº•å±‚ä»£ç \"}},[t._v(\"#\")]),t._v(\" åº•å±‚ä»£ç \")]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"func\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"mapaccess2\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"maptype\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" h \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"hmap\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" key unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"bool\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// map ä¸ºç©ºï¼Œæˆ–è€…å…ƒç´ æ•°ä¸º 0ï¼Œç›´æ¥è¿”å›æœªæ‰¾åˆ°\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" h \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"==\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"nil\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"||\")]),t._v(\" h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"count \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"==\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"zeroVal\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"false\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// ä¸æ”¯æŒå¹¶å‘è¯»å†™\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"flags\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"hashWriting \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"throw\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"concurrent map read and map write\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ ¹æ®hash å‡½æ•°ç®—å‡ºhashå€¼ï¼Œæ³¨æ„keyçš„ç±»å‹ä¸åŒå¯èƒ½ä½¿ç”¨çš„hashå‡½æ•°ä¹Ÿä¸åŒ\")]),t._v(\"\\n    hash \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"hasher\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"key\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"hash0\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å¦‚æœ B = 5ï¼Œé‚£ä¹ˆç»“æœç”¨äºŒè¿›åˆ¶è¡¨ç¤ºå°±æ˜¯ 11111 ï¼Œ è¿”å›çš„æ˜¯Bä½å…¨1çš„å€¼\")]),t._v(\"\\n    m \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"bucketMask\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"B\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ ¹æ®hashçš„åBä½ï¼Œå®šä½åœ¨bucketæ•°ç»„ä¸­çš„ä½ç½®\")]),t._v(\"\\n    b \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"bmap\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"buckets\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"hash\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"m\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"bucketsize\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å½“ h.oldbuckets éç©ºæ—¶ï¼Œè¯´æ˜ map å‘ç”Ÿäº†æ‰©å®¹\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// è¿™æ—¶å€™ï¼Œæ–°çš„ buckets é‡Œå¯èƒ½è¿˜æ²¡æœ‰è€çš„å†…å®¹\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ‰€ä»¥ä¸€å®šè¦åœ¨è€çš„é‡Œé¢æ‰¾ï¼Œå¦åˆ™æœ‰å¯èƒ½å‘ç”Ÿâ€œæ¶ˆå¤±â€çš„è¯¡å¼‚ç°è±¡\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" c \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"oldbuckets\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" c \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"nil\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!\")]),t._v(\"h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"sameSizeGrow\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// è¯´æ˜ä¹‹å‰åªæœ‰ä¸€åŠçš„ bucketï¼Œéœ€è¦é™¤ 2\")]),t._v(\"\\n            m \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\">>=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"1\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n        oldb \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"bmap\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"c\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"hash\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"m\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"bucketsize\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"evacuated\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"oldb\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            b \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" oldb\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// tophash å–å…¶é«˜ 8bit çš„å€¼\")]),t._v(\"\\n    top \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"tophash\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"hash\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// ä¸€ä¸ª bucket åœ¨å­˜å‚¨æ»¡ 8 ä¸ªå…ƒç´ åï¼Œå°±å†ä¹Ÿæ”¾ä¸ä¸‹äº†ï¼Œè¿™æ—¶å€™ä¼šåˆ›å»ºæ–°çš„ bucketï¼ŒæŒ‚åœ¨åŸæ¥çš„ bucket çš„ overflow æŒ‡é’ˆæˆå‘˜ä¸Š\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// éå†å½“å‰bucketçš„æ‰€æœ‰é“¾å¼bucket\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" b \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"nil\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" b \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" b\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"overflow\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// åœ¨bucketçš„8ä¸ªä½ç½®ä¸ŠæŸ¥è¯¢\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\" bucketCnt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"++\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å¦‚æœæ‰¾åˆ°äº†ç›¸ç­‰çš„ tophashï¼Œé‚£è¯´æ˜å°±æ˜¯è¿™ä¸ª bucket äº†\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" b\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"tophash\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" top \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"continue\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ ¹æ®å†…å­˜ç»“æ„å®šä½keyçš„ä½ç½®\")]),t._v(\"\\n            k \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"add\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"b\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" dataOffset\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"keysize\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"indirectkey \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                k \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ ¡éªŒæ‰¾åˆ°çš„keyæ˜¯å¦åŒ¹é…\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"key\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"equal\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"key\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// å®šä½vçš„ä½ç½®\")]),t._v(\"\\n                v \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"add\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"b\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" dataOffset\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\"bucketCnt\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"keysize\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"uintptr\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"valuesize\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" t\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"indirectvalue \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n                    v \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"*\")]),t._v(\"unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"Pointer\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"v\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" v\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"true\")]),t._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// æ‰€æœ‰ bucket éƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œè¿”å›é›¶å€¼å’Œ false\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"return\")]),t._v(\" unsafe\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Pointer\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"zeroVal\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[t._v(\"false\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"20\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"21\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"22\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"23\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"24\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"25\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"26\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"27\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"28\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"29\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"30\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"31\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"32\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"33\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"34\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"35\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"36\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"37\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"38\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"39\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"40\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"41\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"42\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"43\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"44\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"45\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"46\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"47\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"48\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"49\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"50\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"51\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"52\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"53\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"54\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"55\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"56\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"57\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"58\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"59\")]),s(\"br\")])]),s(\"h3\",{attrs:{id:\"å¯»å€è¿‡ç¨‹\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#å¯»å€è¿‡ç¨‹\"}},[t._v(\"#\")]),t._v(\" å¯»å€è¿‡ç¨‹\")]),t._v(\" \"),s(\"p\",[s(\"img\",{attrs:{src:\"/image/usual_tech/go/mapadd.png\",alt:\"mapadd\"}}),t._v(\" \"),s(\"img\",{attrs:{src:\"/image/usual_tech/go/mapfor.png\",alt:\"mapfor\"}})]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ğŸ‘ğŸ¾-map-çš„æ‰©å®¹\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ¾-map-çš„æ‰©å®¹\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ¾ Map çš„æ‰©å®¹\")]),t._v(\" \"),s(\"p\",[t._v(\"åœ¨ golang ä¸­ map å’Œ slice ä¸€æ ·éƒ½æ˜¯åœ¨åˆå§‹åŒ–æ—¶é¦–å…ˆç”³è¯·è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œåœ¨ map çš„ä¸æ–­å­˜å…¥çš„è¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€çš„è¿›è¡Œæ‰©å®¹ã€‚æ‰©å®¹å…±æœ‰ä¸¤ç§ï¼Œ\"),s(\"strong\",[s(\"em\",[t._v(\"å¢é‡æ‰©å®¹ä¸ç­‰é‡æ‰©å®¹\")])]),t._v(\"ï¼ˆé‡æ–°æ’åˆ—å¹¶åˆ†é…å†…å­˜ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥äº†è§£ä¸€ä¸‹æ‰©å®¹çš„è§¦å‘æ–¹å¼ï¼š\")]),t._v(\" \"),s(\"ol\",[s(\"li\",[t._v(\"è´Ÿè½½å› å­è¶…è¿‡é˜ˆå€¼ï¼Œæºç é‡Œå®šä¹‰çš„é˜ˆå€¼æ˜¯ 6.5ã€‚(è§¦å‘å¢é‡æ‰©å®¹)\")]),t._v(\" \"),s(\"li\",[t._v(\"overflow çš„ bucket æ•°é‡è¿‡å¤šï¼šå½“ B å°äº 15ï¼Œä¹Ÿå°±æ˜¯ bucket æ€»æ•° 2^B å°äº 2^15 æ—¶ï¼Œå¦‚æœ overflow çš„ bucket æ•°é‡è¶…è¿‡ 2^Bï¼›å½“ B >= 15ï¼Œä¹Ÿå°±æ˜¯ bucket æ€»æ•° 2^B å¤§äºç­‰äº 2^15ï¼Œå¦‚æœ overflow çš„ bucket æ•°é‡è¶…è¿‡ 2^15ã€‚ï¼ˆè§¦å‘ç­‰é‡æ‰©å®¹ï¼‰\")])]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ğŸ‘ğŸ¾-map-çš„æœ‰åºæ€§\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ¾-map-çš„æœ‰åºæ€§\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ¾ Map çš„æœ‰åºæ€§\")]),t._v(\" \"),s(\"p\",[t._v(\"å…ˆè¯´ç»“è®ºï¼Œåœ¨ golang ä¸­ map æ˜¯æ— åºçš„ï¼Œå‡†ç¡®çš„è¯´æ˜¯æ— æ³•ä¸¥æ ¼ä¿è¯é¡ºåºçš„ï¼Œ ä»ä¸Šé¢çš„æºç ä¸­æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œgolang ä¸­ map åœ¨æ‰©å®¹åï¼Œå¯èƒ½ä¼šå°†éƒ¨åˆ† key ç§»è‡³æ–°å†…å­˜ï¼Œç”±äºåœ¨æ‰©å®¹æ¬ç§»æ•°æ®è¿‡ç¨‹ä¸­ï¼Œå¹¶æœªè®°å½•åŸæ•°æ®ä½ç½®ï¼Œ å¹¶ä¸”åœ¨ golang çš„æ•°æ®ç»“æ„ä¸­ä¹Ÿå¹¶æœªä¿å­˜æ•°æ®çš„é¡ºåºï¼Œæ‰€ä»¥é‚£ä¹ˆè¿™ä¸€éƒ¨åˆ†åœ¨æ‰©å®¹åå®é™…ä¸Šå°±å·²ç»æ˜¯æ— åºçš„äº†ã€‚\\néå†çš„è¿‡ç¨‹ï¼Œå…¶å®å°±æ˜¯æŒ‰é¡ºåºéå†å†…å­˜åœ°å€ï¼ŒåŒæ—¶æŒ‰é¡ºåºéå†å†…å­˜åœ°å€ä¸­çš„ keyã€‚ä½†è¿™æ—¶å·²ç»æ˜¯æ— åºçš„äº†ã€‚ä½†æ˜¯å¦‚æœæˆ‘å°±ä¸€ä¸ª mapï¼Œæˆ‘ä¿è¯ä¸ä¼šå¯¹ map è¿›è¡Œä¿®æ”¹åˆ é™¤ç­‰æ“ä½œï¼Œé‚£ä¹ˆæŒ‰ç†è¯´æ²¡æœ‰æ‰©å®¹å°±ä¸ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½†ä¹Ÿæ˜¯å› ä¸ºè¿™æ ·ï¼ŒGO æ‰åœ¨æºç ä¸­ ä½†æ˜¯æœ‰ä¸€ä¸ªæœ‰è¶£çš„ç°è±¡ï¼Œå°±ç®—ä¸å¯¹ map è¿›è¡Œæ’å…¥åˆ é™¤ç­‰æ“ä½œè‡´ä½¿å…¶æ‰©å®¹ï¼Œå…¶åœ¨éå†è¿‡ç¨‹ä¸­ä»æ˜¯æ— åºçš„ã€‚\")]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[t._v(\"objMap \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"make\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"map\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"string\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"int\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"5\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"++\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n   objMap\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"[\")]),t._v(\"strconv\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Itoa\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"i\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"]\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"=\")]),t._v(\" i\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"<\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"5\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\";\")]),t._v(\" i \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"++\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"var\")]),t._v(\" valStr1\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" valStr2 \"),s(\"span\",{pre:!0,attrs:{class:\"token builtin\"}},[t._v(\"string\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" v \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"range\")]),t._v(\" objMap \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"v\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      valStr1 \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+=\")]),t._v(\" k\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"for\")]),t._v(\" k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\",\")]),t._v(\" v \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\":=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"range\")]),t._v(\" objMap \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"k\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"v\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n      valStr2 \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"+=\")]),t._v(\" k\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n   fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),t._v(\"valStr1 \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"==\")]),t._v(\" valStr2\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" valStr1 \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" valStr2 \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n      fmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"not equal\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n   \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\nfmt\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"Println\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"end\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"7\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"8\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"9\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"10\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"11\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"12\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"13\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"14\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"15\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"16\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"17\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"18\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"19\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"20\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"21\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"22\")]),s(\"br\")])]),s(\"p\",[t._v(\"ä»¥ä¸Šçš„è¿è¡Œç»“æœæ˜¯\")]),t._v(\" \"),s(\"div\",{staticClass:\"language- line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-text\"}},[s(\"code\",[t._v(\"not equal\\nequal\\nnot equal\\nnot equal\\nnot equal\\nequal\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"5\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"6\")]),s(\"br\")])]),s(\"p\",[t._v(\"ä¸éš¾çœ‹å‡ºï¼Œå³ä½¿ä¸å¯¹ map è¿›è¡Œæ‰©å®¹ï¼Œåœ¨å¤šæ¬¡éå†æ—¶ä¹Ÿæ˜¯æ— åºçš„ï¼Œè¿™æ˜¯å› ä¸º golang å®˜æ–¹åœ¨è®¾è®¡æ—¶æ•…æ„åŠ ä¸Šéšæœºçš„å…ƒç´ ï¼Œå°†éå† map çš„é¡ºåºéšæœºåŒ–ï¼Œç”¨æ¥é˜²æ­¢ä½¿ç”¨è€…ç”¨æ¥é¡ºåºéå†ã€‚\\nä¾èµ– map çš„é¡ºåºè¿›è¡Œéå†ï¼Œè¿™æ˜¯æœ‰é£é™©çš„ä»£ç ï¼Œåœ¨ GO çš„ä¸¥æ ¼è¯­æ³•è§„åˆ™ä¸‹ï¼Œæ˜¯åšå†³ä¸æå€¡çš„ã€‚æ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨ map æ—¶ä¸€å®šè¦è®°å¾—å…¶æ˜¯æ— åºçš„ï¼Œä¸è¦ä¾èµ–å…¶é¡ºåºã€‚\")]),t._v(\" \"),s(\"h2\",{attrs:{id:\"ğŸ‘ğŸ¾-map-çš„å¹¶å‘\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#ğŸ‘ğŸ¾-map-çš„å¹¶å‘\"}},[t._v(\"#\")]),t._v(\" ğŸ‘ğŸ¾ Map çš„å¹¶å‘\")]),t._v(\" \"),s(\"p\",[t._v(\"é¦–å…ˆæˆ‘ä»¬å¤§å®¶éƒ½çŸ¥é“ï¼Œåœ¨ golang ä¸­ map å¹¶ä¸æ˜¯ä¸€ä¸ªå¹¶å‘å®‰å…¨çš„æ•°æ®ç»“æ„ï¼Œå½“å‡ ä¸ª goruotine åŒæ—¶å¯¹ä¸€ä¸ª map è¿›è¡Œè¯»å†™æ“ä½œæ—¶ï¼Œå°±ä¼šå‡ºç°å¹¶å‘å†™é—®é¢˜ï¼šfatal error: concurrent map writesã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆ map æ˜¯ä¸æ”¯æŒå¹¶å‘å®‰å…¨çš„å‘¢ï¼Œ ä¸»è¦æ˜¯å› ä¸ºæˆæœ¬ä¸æ•ˆç›Šã€‚\\nå®˜æ–¹ç­”å¤åŸå› å¦‚ä¸‹ï¼š\")]),t._v(\" \"),s(\"ul\",[s(\"li\",[t._v(\"å…¸å‹ä½¿ç”¨åœºæ™¯ï¼šmap çš„å…¸å‹ä½¿ç”¨åœºæ™¯æ˜¯ä¸éœ€è¦ä»å¤šä¸ª goroutine ä¸­è¿›è¡Œå®‰å…¨è®¿é—®ã€‚\")]),t._v(\" \"),s(\"li\",[t._v(\"éå…¸å‹åœºæ™¯ï¼ˆéœ€è¦åŸå­æ“ä½œï¼‰ï¼šmap å¯èƒ½æ˜¯ä¸€äº›æ›´å¤§çš„æ•°æ®ç»“æ„æˆ–å·²ç»åŒæ­¥çš„è®¡ç®—çš„ä¸€éƒ¨åˆ†ã€‚\\næ€§èƒ½åœºæ™¯è€ƒè™‘ï¼šè‹¥æ˜¯åªæ˜¯ä¸ºå°‘æ•°ç¨‹åºå¢åŠ å®‰å…¨æ€§ï¼Œå¯¼è‡´ map æ‰€æœ‰çš„æ“ä½œéƒ½è¦å¤„ç† mutexï¼Œå°†ä¼šé™ä½å¤§å¤šæ•°ç¨‹åºçš„æ€§èƒ½ã€‚åŒæ—¶ golang æä¾›äº†å¹¶å‘å®‰å…¨çš„ sync mapã€‚\")])]),t._v(\" \"),s(\"div\",{staticClass:\"language-Go line-numbers-mode\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-go\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[t._v(\"// ä¸æ”¯æŒå¹¶å‘è¯»å†™\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[t._v(\"if\")]),t._v(\" h\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\".\")]),t._v(\"flags\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"&\")]),t._v(\"hashWriting \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[t._v(\"!=\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[t._v(\"0\")]),t._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"{\")]),t._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[t._v(\"throw\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"(\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[t._v('\"concurrent map read and map write\"')]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\")\")]),t._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[t._v(\"}\")]),t._v(\"\\n\")])]),t._v(\" \"),s(\"div\",{staticClass:\"line-numbers-wrapper\"},[s(\"span\",{staticClass:\"line-number\"},[t._v(\"1\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"2\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"3\")]),s(\"br\"),s(\"span\",{staticClass:\"line-number\"},[t._v(\"4\")]),s(\"br\")])]),s(\"p\",[t._v(\"ä½†æ˜¯æˆ‘ä»¬åˆæœ‰ç–‘é—®äº†ï¼Œä¸ºä»€ä¹ˆ golang map å¹¶å‘å†²çªäº†ä¸æŠ›ä¸€ä¸ª error å‡ºæ¥ï¼Œæˆ–è€… panic æ‰ï¼Œè€Œæ˜¯è¦è®©ç¨‹åº panicï¼Œé€‰æ‹©è®©ç¨‹åº crash å´©æºƒæ‰ã€‚è¿™é‡Œæ˜¯ golang å®˜æ–¹å‡ºäºæƒè¡¡é£é™©å’Œ map ä½¿ç”¨å¤æ‚åº¦åœºæ™¯è€ƒè™‘çš„ï¼Œé¦–å…ˆ map åœ¨å®˜æ–¹ä¸­å°±æ˜ç¡®è¡¨ç¤ºä¸æ”¯æŒå¹¶å‘è¯»å†™ï¼Œ æ‰€ä»¥å¹¶å‘å¯¹ map è¿›è¡Œè¯»å†™æ“ä½œæœ¬èº«å°±æ˜¯ä¸æ­£ç¡®çš„ã€‚\\nåœºæ™¯å‡è®¾ä¸€ï¼šå¦‚æœ map é€‰æ‹©åœ¨å†™å…¥æˆ–è€…è¯»å–æ—¶å¢åŠ  error è¿”å›å€¼ï¼Œä¼šå¯¼è‡´ç¨‹åºåœ¨ä½¿ç”¨ map æ—¶å°±æ— æ³•åƒç°åœ¨ä¸€æ ·ï¼Œéœ€è¦é¢å¤–çš„æ•è·å¹¶åˆ¤æ–­ errã€‚\\nåœºæ™¯å‡è®¾äºŒï¼šå¦‚æœ map é€‰æ‹© panicï¼ˆå¯è¢« recoverï¼‰ï¼Œæ­¤æ—¶å¦‚æœå‡ºç°å¹¶å‘å†™å…¥æ•°æ®çš„åœºæ™¯ï¼Œå°±ä¼šå¯¼è‡´èµ°è¿› recover ä¸­ï¼Œå¦‚æœæ²¡æœ‰å¯¹è¿™ç§åœºæ™¯è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œå°±ä¼šå¯¼è‡´ map ä¸­å­˜åœ¨è„æ•°æ®ï¼Œæ­¤æ—¶ç¨‹åºåœ¨ä½¿ç”¨ map æ—¶å°±ä¼šå¼•å‘ä¸å¯é¢„çŸ¥çš„é”™è¯¯ï¼Œæ­¤æ—¶æ’æŸ¥èµ·æ¥ä¹Ÿæ˜¯å¾ˆéš¾æ‰¾åˆ°é—®é¢˜çš„æ ¹å› çš„ã€‚\\næ‰€ä»¥ golang åœ¨è€ƒè™‘äº†è¿™äº›åœºæ™¯åï¼Œé€‰æ‹©æ˜ç¡®çš„æŠ›å‡º crash å´©æºƒå¼‚å¸¸ï¼Œä½¿å¾—é£é™©è¢«æå‰æš´éœ²ã€‚å¯ä»¥æ˜ç¡®çš„å®šä½åˆ°é—®é¢˜ç‚¹ã€‚ç»¼ä¸Šæ‰€è¿°æˆ‘ä»¬åœ¨ä½¿ç”¨ map æ—¶ï¼Œå·²ç»è¦ä¸¥æ ¼ä¿éšœå…¶æ˜¯åœ¨å•çº¿ç¨‹å†…ä½¿ç”¨çš„ï¼Œå¦‚æœæœ‰å¤šçº¿ç¨‹åœºæ™¯ï¼Œå»ºè®®ä½¿ç”¨ sync map ã€‚\")])])}),[],!1,null,null,null);s.default=e.exports}}]);","extractedComments":[]}