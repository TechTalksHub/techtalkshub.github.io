<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3ã€ Slice åº•å±‚åŸç† | TechTalks</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/image/ico.png">
    <meta name="description" content="TechTalksï¼šæé«˜ä½ çš„ç¼–ç¨‹æŠ€èƒ½å’Œæ€ç»´æ–¹å¼çš„è®¡ç®—æœºæŠ€æœ¯åšå®¢">
    <meta name="baidu-site-verification" content="codeva-ykKwcuuoe9">
    
    <link rel="preload" href="/assets/css/0.styles.576f4a24.css" as="style"><link rel="preload" href="/assets/js/app.2c5bbe05.js" as="script"><link rel="preload" href="/assets/js/2.23b0dd23.js" as="script"><link rel="preload" href="/assets/js/63.a907f313.js" as="script"><link rel="prefetch" href="/assets/js/10.439434ef.js"><link rel="prefetch" href="/assets/js/11.8028b07e.js"><link rel="prefetch" href="/assets/js/12.2ae4910c.js"><link rel="prefetch" href="/assets/js/13.268a3222.js"><link rel="prefetch" href="/assets/js/14.33ce6897.js"><link rel="prefetch" href="/assets/js/15.bdcc99ef.js"><link rel="prefetch" href="/assets/js/16.46fa482d.js"><link rel="prefetch" href="/assets/js/17.7f3894c5.js"><link rel="prefetch" href="/assets/js/18.6f69bd99.js"><link rel="prefetch" href="/assets/js/19.051a42c6.js"><link rel="prefetch" href="/assets/js/20.ba0d021b.js"><link rel="prefetch" href="/assets/js/21.02eb122b.js"><link rel="prefetch" href="/assets/js/22.e655623c.js"><link rel="prefetch" href="/assets/js/23.70c69917.js"><link rel="prefetch" href="/assets/js/24.c6d3233d.js"><link rel="prefetch" href="/assets/js/25.4a19fb38.js"><link rel="prefetch" href="/assets/js/26.a6b21126.js"><link rel="prefetch" href="/assets/js/27.987667e7.js"><link rel="prefetch" href="/assets/js/28.40d33fdb.js"><link rel="prefetch" href="/assets/js/29.1bcceec8.js"><link rel="prefetch" href="/assets/js/3.db2b7f14.js"><link rel="prefetch" href="/assets/js/30.dc547128.js"><link rel="prefetch" href="/assets/js/31.108a7ea5.js"><link rel="prefetch" href="/assets/js/32.9a658b23.js"><link rel="prefetch" href="/assets/js/33.9125efc8.js"><link rel="prefetch" href="/assets/js/34.4b3c23ed.js"><link rel="prefetch" href="/assets/js/35.09a6db7d.js"><link rel="prefetch" href="/assets/js/36.5f34af0e.js"><link rel="prefetch" href="/assets/js/37.6c3ded65.js"><link rel="prefetch" href="/assets/js/38.a5f0b672.js"><link rel="prefetch" href="/assets/js/39.84fc629c.js"><link rel="prefetch" href="/assets/js/4.dd3b88fa.js"><link rel="prefetch" href="/assets/js/40.ef7bffd7.js"><link rel="prefetch" href="/assets/js/41.27ae1ef4.js"><link rel="prefetch" href="/assets/js/42.846c55db.js"><link rel="prefetch" href="/assets/js/43.760e42bd.js"><link rel="prefetch" href="/assets/js/44.4f8501ae.js"><link rel="prefetch" href="/assets/js/45.e6c70d39.js"><link rel="prefetch" href="/assets/js/46.943a994c.js"><link rel="prefetch" href="/assets/js/47.e4887269.js"><link rel="prefetch" href="/assets/js/48.49c4ab75.js"><link rel="prefetch" href="/assets/js/49.bec045d1.js"><link rel="prefetch" href="/assets/js/5.18918da4.js"><link rel="prefetch" href="/assets/js/50.d5e38795.js"><link rel="prefetch" href="/assets/js/51.1e31e24c.js"><link rel="prefetch" href="/assets/js/52.23e0ac90.js"><link rel="prefetch" href="/assets/js/53.c9dfcda9.js"><link rel="prefetch" href="/assets/js/54.6711da2f.js"><link rel="prefetch" href="/assets/js/55.aa024487.js"><link rel="prefetch" href="/assets/js/56.ece32596.js"><link rel="prefetch" href="/assets/js/57.beb1fda8.js"><link rel="prefetch" href="/assets/js/58.311df9ca.js"><link rel="prefetch" href="/assets/js/59.f5d8bc4a.js"><link rel="prefetch" href="/assets/js/6.0b646984.js"><link rel="prefetch" href="/assets/js/60.98747fa7.js"><link rel="prefetch" href="/assets/js/61.6aa7f7f8.js"><link rel="prefetch" href="/assets/js/62.eecad293.js"><link rel="prefetch" href="/assets/js/64.fcf5ae5e.js"><link rel="prefetch" href="/assets/js/65.28ac684c.js"><link rel="prefetch" href="/assets/js/66.fbfe4e49.js"><link rel="prefetch" href="/assets/js/7.700c3779.js"><link rel="prefetch" href="/assets/js/8.2666470b.js"><link rel="prefetch" href="/assets/js/9.6cf4f2ae.js">
    <link rel="stylesheet" href="/assets/css/0.styles.576f4a24.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="https://i.ibb.co/Dwq0gdg/ico.png" alt="TechTalks" class="logo"> <span class="site-name can-hide">TechTalks</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº‘åŸç”Ÿ" class="dropdown-title"><span class="title">äº‘åŸç”Ÿ</span> <span class="arrow down"></span></button> <button type="button" aria-label="äº‘åŸç”Ÿ" class="mobile-dropdown-title"><span class="title">äº‘åŸç”Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cloud/blog/" class="nav-link">
  ä¼˜ç§€åšæ–‡
</a></li><li class="dropdown-item"><!----> <a href="/cloud/docker/" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¸¸ç”¨å·¥å…·" class="dropdown-title"><span class="title">å¸¸ç”¨å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¸¸ç”¨å·¥å…·" class="mobile-dropdown-title"><span class="title">å¸¸ç”¨å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/usual_tech/go/" class="nav-link router-link-active">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/usual_tech/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  å¿«æ„é—¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…«è‚¡æ–‡" class="dropdown-title"><span class="title">å…«è‚¡æ–‡</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…«è‚¡æ–‡" class="mobile-dropdown-title"><span class="title">å…«è‚¡æ–‡</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/network/" class="nav-link">
  â˜ï¸ è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/cs/database/" class="nav-link">
  ğŸ’¾ æ•°æ®åº“
</a></li><li class="dropdown-item"><!----> <a href="/cs/os/" class="nav-link">
  ğŸ’» æ“ä½œç³»ç»Ÿ
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="äº‘åŸç”Ÿ" class="dropdown-title"><span class="title">äº‘åŸç”Ÿ</span> <span class="arrow down"></span></button> <button type="button" aria-label="äº‘åŸç”Ÿ" class="mobile-dropdown-title"><span class="title">äº‘åŸç”Ÿ</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cloud/blog/" class="nav-link">
  ä¼˜ç§€åšæ–‡
</a></li><li class="dropdown-item"><!----> <a href="/cloud/docker/" class="nav-link">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å¸¸ç”¨å·¥å…·" class="dropdown-title"><span class="title">å¸¸ç”¨å·¥å…·</span> <span class="arrow down"></span></button> <button type="button" aria-label="å¸¸ç”¨å·¥å…·" class="mobile-dropdown-title"><span class="title">å¸¸ç”¨å·¥å…·</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/usual_tech/go/" class="nav-link router-link-active">
  Go
</a></li><li class="dropdown-item"><!----> <a href="/usual_tech/git/" class="nav-link">
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/tools/" class="nav-link">
  å¿«æ„é—¨
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="å…«è‚¡æ–‡" class="dropdown-title"><span class="title">å…«è‚¡æ–‡</span> <span class="arrow down"></span></button> <button type="button" aria-label="å…«è‚¡æ–‡" class="mobile-dropdown-title"><span class="title">å…«è‚¡æ–‡</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/cs/network/" class="nav-link">
  â˜ï¸ è®¡ç®—æœºç½‘ç»œ
</a></li><li class="dropdown-item"><!----> <a href="/cs/database/" class="nav-link">
  ğŸ’¾ æ•°æ®åº“
</a></li><li class="dropdown-item"><!----> <a href="/cs/os/" class="nav-link">
  ğŸ’» æ“ä½œç³»ç»Ÿ
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ä¸€ã€åŸºç¡€çŸ¥è¯†</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>äºŒã€é«˜é˜¶çŸ¥è¯†</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/usual_tech/go/GMP.html" class="sidebar-link">1ã€GMPæ¨¡å‹</a></li><li><a href="/usual_tech/go/GC.html" class="sidebar-link">2ã€ GO GC åƒåœ¾å›æ”¶æœºåˆ¶</a></li><li><a href="/usual_tech/go/Slice.html" aria-current="page" class="active sidebar-link">3ã€ Slice åº•å±‚åŸç†</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#_3-1-åˆ‡ç‰‡ä¸æ•°ç»„çš„åŒºåˆ«" class="sidebar-link">3.1 åˆ‡ç‰‡ä¸æ•°ç»„çš„åŒºåˆ«</a></li><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#_3-2-åˆ‡ç‰‡çš„æ•°æ®ç»“æ„" class="sidebar-link">3.2 åˆ‡ç‰‡çš„æ•°æ®ç»“æ„</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#nil-å’Œç©ºåˆ‡ç‰‡" class="sidebar-link">nil å’Œç©ºåˆ‡ç‰‡</a></li><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#åˆ‡ç‰‡æ‰©å®¹" class="sidebar-link">åˆ‡ç‰‡æ‰©å®¹</a></li><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#æ‰©å®¹åæ–°æ•°ç»„-or-è€æ•°ç»„" class="sidebar-link">æ‰©å®¹åæ–°æ•°ç»„ or è€æ•°ç»„ ï¼Ÿ</a></li><li class="sidebar-sub-header"><a href="/usual_tech/go/Slice.html#åˆ‡ç‰‡æ‹·è´" class="sidebar-link">åˆ‡ç‰‡æ‹·è´</a></li></ul></li></ul></li><li><a href="/usual_tech/go/Map.html" class="sidebar-link">4ã€Map åº•å±‚åŸç†</a></li><li><a href="/usual_tech/go/mem.html" class="sidebar-link">5ã€Golang çš„å†…å­˜åˆ†é…é€ƒé€¸ å †å’Œæ ˆ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3ã€-slice-åº•å±‚åŸç†"><a href="#_3ã€-slice-åº•å±‚åŸç†" class="header-anchor">#</a> 3ã€ Slice åº•å±‚åŸç†</h1> <h2 id="_3-1-åˆ‡ç‰‡ä¸æ•°ç»„çš„åŒºåˆ«"><a href="#_3-1-åˆ‡ç‰‡ä¸æ•°ç»„çš„åŒºåˆ«" class="header-anchor">#</a> 3.1 åˆ‡ç‰‡ä¸æ•°ç»„çš„åŒºåˆ«</h2> <p>åœ¨ Go ä¸­ï¼Œä¸ C æ•°ç»„å˜é‡éšå¼ä½œä¸ºæŒ‡é’ˆä½¿ç”¨ä¸åŒï¼ŒGo æ•°ç»„æ˜¯å€¼ç±»å‹ï¼Œèµ‹å€¼å’Œå‡½æ•°ä¼ å‚æ“ä½œéƒ½ä¼šå¤åˆ¶æ•´ä¸ªæ•°ç»„æ•°æ®ã€‚</p> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   arrayA <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span>
   <span class="token function">testArrayPoint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arrayA<span class="token punctuation">)</span>   <span class="token comment">// 1.ä¼ æ•°ç»„æŒ‡é’ˆ</span>
   arrayB <span class="token operator">:=</span> arrayA<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
   <span class="token function">testArrayPoint2</span><span class="token punctuation">(</span>arrayB<span class="token punctuation">)</span>   <span class="token comment">// 2.ä¼ åˆ‡ç‰‡</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;arrayA : %p , %v\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arrayA<span class="token punctuation">,</span> arrayA<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">testArrayPoint</span><span class="token punctuation">(</span>x <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;func Array : %p , %v\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token operator">*</span>x<span class="token punctuation">)</span>
   <span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">testArrayPoint2</span><span class="token punctuation">(</span>x <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;func Array : %p , %v\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>x<span class="token punctuation">,</span> x<span class="token punctuation">)</span>
   x<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ‰“å°ï¼š</span>
<span class="token comment">// arrayA : 0xc4200bebf0 , [100 200]</span>
<span class="token comment">// arrayB : 0xc4200bec00 , [100 200]</span>
<span class="token comment">// func Array : 0xc4200bec30 , [100 200]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>å¯ä»¥çœ‹åˆ°ï¼Œä¸‰ä¸ªå†…å­˜åœ°å€éƒ½ä¸åŒï¼Œè¿™ä¹Ÿå°±éªŒè¯äº† Go ä¸­æ•°ç»„èµ‹å€¼å’Œå‡½æ•°ä¼ å‚éƒ½æ˜¯å€¼å¤åˆ¶çš„ã€‚é‚£è¿™ä¼šå¯¼è‡´ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿ</p> <p>å‡æƒ³æ¯æ¬¡ä¼ å‚éƒ½ç”¨æ•°ç»„ï¼Œé‚£ä¹ˆæ¯æ¬¡æ•°ç»„éƒ½è¦è¢«å¤åˆ¶ä¸€éã€‚å¦‚æœæ•°ç»„å¤§å°æœ‰ 100ä¸‡ï¼Œåœ¨64ä½æœºå™¨ä¸Šå°±éœ€è¦èŠ±è´¹å¤§çº¦ 800W å­—èŠ‚ï¼Œå³ 8MB å†…å­˜ã€‚è¿™æ ·ä¼šæ¶ˆè€—æ‰å¤§é‡çš„å†…å­˜ã€‚äºæ˜¯ä¹æœ‰äººæƒ³åˆ°ï¼Œå‡½æ•°ä¼ å‚ç”¨æ•°ç»„çš„æŒ‡é’ˆã€‚</p> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    arrayA <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">}</span>
    <span class="token function">testArrayPoint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arrayA<span class="token punctuation">)</span>   <span class="token comment">// 1.ä¼ æ•°ç»„æŒ‡é’ˆ</span>
    arrayB <span class="token operator">:=</span> arrayA<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token function">testArrayPoint</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arrayB<span class="token punctuation">)</span>   <span class="token comment">// 2.ä¼ åˆ‡ç‰‡</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;arrayA : %p , %v\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arrayA<span class="token punctuation">,</span> arrayA<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">testArrayPoint</span><span class="token punctuation">(</span>x <span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;func Array : %p , %v\n&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token operator">*</span>x<span class="token punctuation">)</span>
    <span class="token punctuation">(</span><span class="token operator">*</span>x<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token number">100</span>
<span class="token punctuation">}</span>
<span class="token comment">// æ‰“å°ï¼š</span>
<span class="token comment">//func Array : 0xc4200b0140 , [100 200]</span>
<span class="token comment">//func Array : 0xc4200b0180 , [100 300]</span>
<span class="token comment">//arrayA : 0xc4200b0140 , [100 400]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>è¿™ä¹Ÿå°±è¯æ˜äº†æ•°ç»„æŒ‡é’ˆç¡®å®åˆ°è¾¾äº†æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœã€‚ç°åœ¨å°±ç®—æ˜¯ä¼ å…¥10äº¿çš„æ•°ç»„ï¼Œä¹Ÿåªéœ€è¦å†æ ˆä¸Šåˆ†é…ä¸€ä¸ª8ä¸ªå­—èŠ‚çš„å†…å­˜ç»™æŒ‡é’ˆå°±å¯ä»¥äº†ã€‚è¿™æ ·æ›´åŠ é«˜æ•ˆçš„åˆ©ç”¨å†…å­˜ï¼Œæ€§èƒ½ä¹Ÿæ¯”ä¹‹å‰çš„å¥½ã€‚</p> <p>ä¸è¿‡ä¼ æŒ‡é’ˆä¼šæœ‰ä¸€ä¸ªå¼Šç«¯ï¼Œä»æ‰“å°ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œç¬¬ä¸€è¡Œå’Œç¬¬ä¸‰è¡ŒæŒ‡é’ˆåœ°å€éƒ½æ˜¯åŒä¸€ä¸ªï¼Œä¸‡ä¸€<strong>åŸæ•°ç»„çš„æŒ‡é’ˆæŒ‡å‘æ›´æ”¹äº†ï¼Œé‚£ä¹ˆå‡½æ•°é‡Œé¢çš„æŒ‡é’ˆæŒ‡å‘éƒ½ä¼šè·Ÿç€æ›´æ”¹ã€‚</strong></p> <p>åˆ‡ç‰‡çš„ä¼˜åŠ¿ä¹Ÿå°±è¡¨ç°å‡ºæ¥äº†ã€‚ç”¨åˆ‡ç‰‡ä¼ æ•°ç»„å‚æ•°ï¼Œæ—¢å¯ä»¥è¾¾åˆ°èŠ‚çº¦å†…å­˜çš„ç›®çš„ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°åˆç†å¤„ç†å¥½å…±äº«å†…å­˜çš„é—®é¢˜ã€‚æ‰“å°ç»“æœç¬¬äºŒè¡Œå°±æ˜¯åˆ‡ç‰‡ï¼Œåˆ‡ç‰‡çš„æŒ‡é’ˆå’ŒåŸæ¥æ•°ç»„çš„æŒ‡é’ˆæ˜¯ä¸åŒçš„ã€‚</p> <h2 id="_3-2-åˆ‡ç‰‡çš„æ•°æ®ç»“æ„"><a href="#_3-2-åˆ‡ç‰‡çš„æ•°æ®ç»“æ„" class="header-anchor">#</a> 3.2 åˆ‡ç‰‡çš„æ•°æ®ç»“æ„</h2> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    array unsafe<span class="token punctuation">.</span>Pointer
    <span class="token builtin">len</span>   <span class="token builtin">int</span>
    <span class="token builtin">cap</span>   <span class="token builtin">int</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åˆ‡ç‰‡çš„ç»“æ„ä½“ç”±3éƒ¨åˆ†æ„æˆï¼ŒPointer æ˜¯æŒ‡å‘ä¸€ä¸ªæ•°ç»„çš„æŒ‡é’ˆï¼Œlen ä»£è¡¨å½“å‰åˆ‡ç‰‡çš„é•¿åº¦ï¼Œcap æ˜¯å½“å‰åˆ‡ç‰‡çš„å®¹é‡ã€‚cap æ€»æ˜¯å¤§äºç­‰äº len çš„ã€‚</p> <h3 id="nil-å’Œç©ºåˆ‡ç‰‡"><a href="#nil-å’Œç©ºåˆ‡ç‰‡" class="header-anchor">#</a> nil å’Œç©ºåˆ‡ç‰‡</h3> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">var</span> slice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>nil åˆ‡ç‰‡è¢«ç”¨åœ¨å¾ˆå¤šæ ‡å‡†åº“å’Œå†…ç½®å‡½æ•°ä¸­ï¼Œæè¿°ä¸€ä¸ªä¸å­˜åœ¨çš„åˆ‡ç‰‡çš„æ—¶å€™ï¼Œå°±éœ€è¦ç”¨åˆ° nil åˆ‡ç‰‡ã€‚æ¯”å¦‚å‡½æ•°åœ¨å‘ç”Ÿå¼‚å¸¸çš„æ—¶å€™ï¼Œè¿”å›çš„åˆ‡ç‰‡å°±æ˜¯ nil åˆ‡ç‰‡ã€‚nil åˆ‡ç‰‡çš„æŒ‡é’ˆæŒ‡å‘ nilã€‚</p> <p>ç©ºåˆ‡ç‰‡ä¸€èˆ¬ä¼šç”¨æ¥è¡¨ç¤ºä¸€ä¸ªç©ºçš„é›†åˆã€‚æ¯”å¦‚æ•°æ®åº“æŸ¥è¯¢ï¼Œä¸€æ¡ç»“æœä¹Ÿæ²¡æœ‰æŸ¥åˆ°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è¿”å›ä¸€ä¸ªç©ºåˆ‡ç‰‡ã€‚</p> <div class="language-Go line-numbers-mode"><pre class="language-go"><code>silce <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token punctuation">,</span> <span class="token number">0</span> <span class="token punctuation">)</span>
slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ç©ºåˆ‡ç‰‡å’Œ nil åˆ‡ç‰‡çš„åŒºåˆ«åœ¨äºï¼Œ<strong>ç©ºåˆ‡ç‰‡æŒ‡å‘çš„åœ°å€ä¸æ˜¯nilï¼ŒæŒ‡å‘çš„æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰åˆ†é…ä»»ä½•å†…å­˜ç©ºé—´ï¼Œå³åº•å±‚å…ƒç´ åŒ…å«0ä¸ªå…ƒç´ ã€‚</strong></p> <p>æœ€åéœ€è¦è¯´æ˜çš„ä¸€ç‚¹æ˜¯ã€‚<strong>ä¸ç®¡æ˜¯ä½¿ç”¨ nil åˆ‡ç‰‡è¿˜æ˜¯ç©ºåˆ‡ç‰‡ï¼Œå¯¹å…¶è°ƒç”¨å†…ç½®å‡½æ•° appendï¼Œlen å’Œ cap çš„æ•ˆæœéƒ½æ˜¯ä¸€æ ·çš„ã€‚</strong></p> <h3 id="åˆ‡ç‰‡æ‰©å®¹"><a href="#åˆ‡ç‰‡æ‰©å®¹" class="header-anchor">#</a> åˆ‡ç‰‡æ‰©å®¹</h3> <p>å½“ä¸€ä¸ªåˆ‡ç‰‡çš„å®¹é‡æ»¡äº†ï¼Œå°±éœ€è¦æ‰©å®¹äº†ã€‚æ€ä¹ˆæ‰©ï¼Œç­–ç•¥æ˜¯ä»€ä¹ˆï¼Ÿ</p> <p>ç›´æ¥ä¸Šå¹²è´§ã€‚æ¥çœ‹ä¸€ä¸‹åº•å±‚æºç æ˜¯æ€ä¹ˆå®ç°çš„ã€‚</p> <blockquote><p>ä¸æƒ³çœ‹æºç çš„ä¹Ÿå¯ä»¥ç›´æ¥è¯»æ€»ç»“ï¼šGo ä¸­åˆ‡ç‰‡æ‰©å®¹çš„ç­–ç•¥æ˜¯è¿™æ ·çš„ï¼š<br>å¦‚æœåˆ‡ç‰‡çš„å®¹é‡å°äº 1024 ä¸ªå…ƒç´ ï¼Œäºæ˜¯æ‰©å®¹çš„æ—¶å€™å°±ç¿»å€å¢åŠ å®¹é‡ã€‚<br>
ä¸€æ—¦å…ƒç´ ä¸ªæ•°è¶…è¿‡ 1024 ä¸ªå…ƒç´ ï¼Œé‚£ä¹ˆå¢é•¿å› å­å°±å˜æˆ 1.25 ï¼Œå³æ¯æ¬¡å¢åŠ åŸæ¥å®¹é‡çš„å››åˆ†ä¹‹ä¸€ã€‚<br>
æ³¨æ„ï¼šæ‰©å®¹æ‰©å¤§çš„å®¹é‡éƒ½æ˜¯é’ˆå¯¹åŸæ¥çš„å®¹é‡è€Œè¨€çš„ï¼Œè€Œä¸æ˜¯é’ˆå¯¹åŸæ¥æ•°ç»„çš„é•¿åº¦è€Œè¨€çš„ã€‚</p></blockquote> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">growslice</span><span class="token punctuation">(</span>et <span class="token operator">*</span>_type<span class="token punctuation">,</span> old slice<span class="token punctuation">,</span> <span class="token builtin">cap</span> <span class="token builtin">int</span><span class="token punctuation">)</span> slice <span class="token punctuation">{</span>
    <span class="token keyword">if</span> raceenabled <span class="token punctuation">{</span>
        callerpc <span class="token operator">:=</span> <span class="token function">getcallerpc</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>et<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token function">racereadrangepc</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span>array<span class="token punctuation">,</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token operator">*</span><span class="token function">int</span><span class="token punctuation">(</span>et<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> callerpc<span class="token punctuation">,</span> <span class="token function">funcPC</span><span class="token punctuation">(</span>growslice<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> msanenabled <span class="token punctuation">{</span>
        <span class="token function">msanread</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span>array<span class="token punctuation">,</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token operator">*</span><span class="token function">int</span><span class="token punctuation">(</span>et<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> et<span class="token punctuation">.</span>size <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token comment">// å¦‚æœæ–°è¦æ‰©å®¹çš„å®¹é‡æ¯”åŸæ¥çš„å®¹é‡è¿˜è¦å°ï¼Œè¿™ä»£è¡¨è¦ç¼©å®¹äº†ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥æŠ¥panicäº†ã€‚</span>
        <span class="token keyword">if</span> <span class="token builtin">cap</span> <span class="token operator">&lt;</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span> <span class="token punctuation">{</span>
            <span class="token function">panic</span><span class="token punctuation">(</span><span class="token function">errorString</span><span class="token punctuation">(</span><span class="token string">&quot;growslice: cap out of range&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// å¦‚æœå½“å‰åˆ‡ç‰‡çš„å¤§å°ä¸º0ï¼Œè¿˜è°ƒç”¨äº†æ‰©å®¹æ–¹æ³•ï¼Œé‚£ä¹ˆå°±æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å®¹é‡çš„åˆ‡ç‰‡è¿”å›ã€‚</span>
        <span class="token keyword">return</span> slice<span class="token punctuation">{</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>zerobase<span class="token punctuation">)</span><span class="token punctuation">,</span> old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token punctuation">,</span> <span class="token builtin">cap</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

  <span class="token comment">// è¿™é‡Œå°±æ˜¯æ‰©å®¹çš„ç­–ç•¥</span>
    newcap <span class="token operator">:=</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span>
    doublecap <span class="token operator">:=</span> newcap <span class="token operator">+</span> newcap
    <span class="token keyword">if</span> <span class="token builtin">cap</span> <span class="token operator">&gt;</span> doublecap <span class="token punctuation">{</span>
        newcap <span class="token operator">=</span> <span class="token builtin">cap</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> old<span class="token punctuation">.</span><span class="token builtin">len</span> <span class="token operator">&lt;</span> <span class="token number">1024</span> <span class="token punctuation">{</span>
            newcap <span class="token operator">=</span> doublecap
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">for</span> newcap <span class="token operator">&lt;</span> <span class="token builtin">cap</span> <span class="token punctuation">{</span>
                newcap <span class="token operator">+=</span> newcap <span class="token operator">/</span> <span class="token number">4</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è®¡ç®—æ–°çš„åˆ‡ç‰‡çš„å®¹é‡ï¼Œé•¿åº¦ã€‚</span>
    <span class="token keyword">var</span> lenmem<span class="token punctuation">,</span> newlenmem<span class="token punctuation">,</span> capmem <span class="token builtin">uintptr</span>
    <span class="token keyword">const</span> ptrSize <span class="token operator">=</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">byte</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token boolean">nil</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">switch</span> et<span class="token punctuation">.</span>size <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>
        lenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token punctuation">)</span>
        newlenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token builtin">cap</span><span class="token punctuation">)</span>
        capmem <span class="token operator">=</span> <span class="token function">roundupsize</span><span class="token punctuation">(</span><span class="token function">uintptr</span><span class="token punctuation">(</span>newcap<span class="token punctuation">)</span><span class="token punctuation">)</span>
        newcap <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>capmem<span class="token punctuation">)</span>
    <span class="token keyword">case</span> ptrSize<span class="token punctuation">:</span>
        lenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token punctuation">)</span> <span class="token operator">*</span> ptrSize
        newlenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token builtin">cap</span><span class="token punctuation">)</span> <span class="token operator">*</span> ptrSize
        capmem <span class="token operator">=</span> <span class="token function">roundupsize</span><span class="token punctuation">(</span><span class="token function">uintptr</span><span class="token punctuation">(</span>newcap<span class="token punctuation">)</span> <span class="token operator">*</span> ptrSize<span class="token punctuation">)</span>
        newcap <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>capmem <span class="token operator">/</span> ptrSize<span class="token punctuation">)</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        lenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token punctuation">)</span> <span class="token operator">*</span> et<span class="token punctuation">.</span>size
        newlenmem <span class="token operator">=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token builtin">cap</span><span class="token punctuation">)</span> <span class="token operator">*</span> et<span class="token punctuation">.</span>size
        capmem <span class="token operator">=</span> <span class="token function">roundupsize</span><span class="token punctuation">(</span><span class="token function">uintptr</span><span class="token punctuation">(</span>newcap<span class="token punctuation">)</span> <span class="token operator">*</span> et<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
        newcap <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>capmem <span class="token operator">/</span> et<span class="token punctuation">.</span>size<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// åˆ¤æ–­éæ³•çš„å€¼ï¼Œä¿è¯å®¹é‡æ˜¯åœ¨å¢åŠ ï¼Œå¹¶ä¸”å®¹é‡ä¸è¶…è¿‡æœ€å¤§å®¹é‡</span>
    <span class="token keyword">if</span> <span class="token builtin">cap</span> <span class="token operator">&lt;</span> old<span class="token punctuation">.</span><span class="token builtin">cap</span> <span class="token operator">||</span> <span class="token function">uintptr</span><span class="token punctuation">(</span>newcap<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token function">maxSliceCap</span><span class="token punctuation">(</span>et<span class="token punctuation">.</span>size<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">panic</span><span class="token punctuation">(</span><span class="token function">errorString</span><span class="token punctuation">(</span><span class="token string">&quot;growslice: cap out of range&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">var</span> p unsafe<span class="token punctuation">.</span>Pointer
    <span class="token keyword">if</span> et<span class="token punctuation">.</span>kind<span class="token operator">&amp;</span>kindNoPointers <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
        <span class="token comment">// åœ¨è€çš„åˆ‡ç‰‡åé¢ç»§ç»­æ‰©å……å®¹é‡</span>
        p <span class="token operator">=</span> <span class="token function">mallocgc</span><span class="token punctuation">(</span>capmem<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token comment">// å°† lenmem è¿™ä¸ªå¤šä¸ª bytes ä» old.arrayåœ°å€ æ‹·è´åˆ° p çš„åœ°å€å¤„</span>
        <span class="token function">memmove</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> old<span class="token punctuation">.</span>array<span class="token punctuation">,</span> lenmem<span class="token punctuation">)</span>
        <span class="token comment">// å…ˆå°† P åœ°å€åŠ ä¸Šæ–°çš„å®¹é‡å¾—åˆ°æ–°åˆ‡ç‰‡å®¹é‡çš„åœ°å€ï¼Œç„¶åå°†æ–°åˆ‡ç‰‡å®¹é‡åœ°å€åé¢çš„ capmem-newlenmem ä¸ª bytes è¿™å—å†…å­˜åˆå§‹åŒ–ã€‚ä¸ºä¹‹åç»§ç»­ append() æ“ä½œè…¾å‡ºç©ºé—´ã€‚</span>
        <span class="token function">memclrNoHeapPointers</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> newlenmem<span class="token punctuation">)</span><span class="token punctuation">,</span> capmem<span class="token operator">-</span>newlenmem<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// é‡æ–°ç”³è¯·æ–°çš„æ•°ç»„ç»™æ–°åˆ‡ç‰‡</span>
        <span class="token comment">// é‡æ–°ç”³è¯· capmen è¿™ä¸ªå¤§çš„å†…å­˜åœ°å€ï¼Œå¹¶ä¸”åˆå§‹åŒ–ä¸º0å€¼</span>
        p <span class="token operator">=</span> <span class="token function">mallocgc</span><span class="token punctuation">(</span>capmem<span class="token punctuation">,</span> et<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token operator">!</span>writeBarrier<span class="token punctuation">.</span>enabled <span class="token punctuation">{</span>
            <span class="token comment">// å¦‚æœè¿˜ä¸èƒ½æ‰“å¼€å†™é”ï¼Œé‚£ä¹ˆåªèƒ½æŠŠ lenmem å¤§å°çš„ bytes å­—èŠ‚ä» old.array æ‹·è´åˆ° p çš„åœ°å€å¤„</span>
            <span class="token function">memmove</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> old<span class="token punctuation">.</span>array<span class="token punctuation">,</span> lenmem<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// å¾ªç¯æ‹·è´è€çš„åˆ‡ç‰‡çš„å€¼</span>
            <span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> lenmem<span class="token punctuation">;</span> i <span class="token operator">+=</span> et<span class="token punctuation">.</span>size <span class="token punctuation">{</span>
                <span class="token function">typedmemmove</span><span class="token punctuation">(</span>et<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>p<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span>old<span class="token punctuation">.</span>array<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// è¿”å›æœ€ç»ˆæ–°åˆ‡ç‰‡ï¼Œå®¹é‡æ›´æ–°ä¸ºæœ€æ–°æ‰©å®¹ä¹‹åçš„å®¹é‡</span>
    <span class="token keyword">return</span> slice<span class="token punctuation">{</span>p<span class="token punctuation">,</span> old<span class="token punctuation">.</span><span class="token builtin">len</span><span class="token punctuation">,</span> newcap<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br></div></div><h3 id="æ‰©å®¹åæ–°æ•°ç»„-or-è€æ•°ç»„"><a href="#æ‰©å®¹åæ–°æ•°ç»„-or-è€æ•°ç»„" class="header-anchor">#</a> æ‰©å®¹åæ–°æ•°ç»„ or è€æ•°ç»„ ï¼Ÿ</h3> <ul><li>åŸæ•°ç»„è¿˜æœ‰å®¹é‡å¯ä»¥æ‰©å®¹ï¼Œæ‰€ä»¥æ‰§è¡Œ append() æ“ä½œä»¥åï¼Œä¼šåœ¨åŸæ•°ç»„ä¸Šç›´æ¥æ“ä½œï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µä¸‹ï¼Œæ‰©å®¹ä»¥åçš„æ•°ç»„è¿˜æ˜¯æŒ‡å‘åŸæ¥çš„æ•°ç»„ã€‚</li> <li>åŸæ¥æ•°ç»„çš„å®¹é‡å·²ç»è¾¾åˆ°äº†æœ€å¤§å€¼ï¼Œå†æƒ³æ‰©å®¹ï¼Œ Go é»˜è®¤ä¼šå…ˆå¼€ä¸€ç‰‡å†…å­˜åŒºåŸŸï¼ŒæŠŠåŸæ¥çš„å€¼æ‹·è´è¿‡æ¥ï¼Œç„¶åå†æ‰§è¡Œ append() æ“ä½œã€‚è¿™ç§æƒ…å†µä¸æ¯«ä¸å½±å“åŸæ•°ç»„ã€‚</li></ul> <h3 id="åˆ‡ç‰‡æ‹·è´"><a href="#åˆ‡ç‰‡æ‹·è´" class="header-anchor">#</a> åˆ‡ç‰‡æ‹·è´</h3> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    array <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">}</span>
    slice <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span>
    n <span class="token operator">:=</span> <span class="token function">copy</span><span class="token punctuation">(</span>slice<span class="token punctuation">,</span> array<span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span>slice<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>è¯´åˆ°æ‹·è´ï¼Œåˆ‡ç‰‡ä¸­æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„é—®é¢˜ã€‚</p> <div class="language-Go line-numbers-mode"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    slice <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">}</span>
    <span class="token keyword">for</span> index<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> slice <span class="token punctuation">{</span>
        fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;value = %d , value-addr = %x , slice-addr = %x\n&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token operator">&amp;</span>value<span class="token punctuation">,</span> <span class="token operator">&amp;</span>slice<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>è¾“å‡ºï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>value <span class="token operator">=</span> <span class="token number">10</span> , value-addr <span class="token operator">=</span> c4200aedf8 , slice-addr <span class="token operator">=</span> c4200b0320
value <span class="token operator">=</span> <span class="token number">20</span> , value-addr <span class="token operator">=</span> c4200aedf8 , slice-addr <span class="token operator">=</span> c4200b0328
value <span class="token operator">=</span> <span class="token number">30</span> , value-addr <span class="token operator">=</span> c4200aedf8 , slice-addr <span class="token operator">=</span> c4200b0330
value <span class="token operator">=</span> <span class="token number">40</span> , value-addr <span class="token operator">=</span> c4200aedf8 , slice-addr <span class="token operator">=</span> c4200b0338
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä»ä¸Šé¢ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå¦‚æœç”¨ range çš„æ–¹å¼å»éå†ä¸€ä¸ªåˆ‡ç‰‡ï¼Œæ‹¿åˆ°çš„ Value å…¶å®æ˜¯åˆ‡ç‰‡é‡Œé¢çš„å€¼æ‹·è´ã€‚æ‰€ä»¥æ¯æ¬¡æ‰“å° Value çš„åœ°å€éƒ½ä¸å˜ã€‚ä¹Ÿå°±æ˜¯<strong>Goè¯­è¨€å‡ºç°æŒ‡é’ˆæ¼‚ç§»çš„çœŸæ­£åŸå› ã€‚</strong></p> <p>ç”±äº Value æ˜¯å€¼æ‹·è´çš„ï¼Œå¹¶éå¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥ç›´æ¥æ”¹ Value æ˜¯è¾¾ä¸åˆ°æ›´æ”¹åŸåˆ‡ç‰‡å€¼çš„ç›®çš„çš„ï¼Œéœ€è¦é€šè¿‡ &amp;slice[index] è·å–çœŸå®çš„åœ°å€ã€‚</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/usual_tech/go/GC.html" class="prev">
        2ã€ GO GC åƒåœ¾å›æ”¶æœºåˆ¶
      </a></span> <span class="next"><a href="/usual_tech/go/Map.html">
        4ã€Map åº•å±‚åŸç†
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2c5bbe05.js" defer></script><script src="/assets/js/2.23b0dd23.js" defer></script><script src="/assets/js/63.a907f313.js" defer></script>
  </body>
</html>
