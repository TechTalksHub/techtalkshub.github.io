(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{310:function(t,r,e){"use strict";e.r(r);var a=e(14),n=Object(a.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"六、复制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#六、复制"}},[t._v("#")]),t._v(" 六、复制")]),t._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#主从复制"}},[t._v("主从复制")])]),r("li",[r("a",{attrs:{href:"#读写分离"}},[t._v("读写分离")])])])]),r("p"),t._v(" "),r("h3",{attrs:{id:"主从复制"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#主从复制"}},[t._v("#")]),t._v(" 主从复制")]),t._v(" "),r("p",[t._v("主要涉及三个线程：binlog 线程、I/O 线程和 SQL 线程。")]),t._v(" "),r("ul",[r("li",[r("strong",[t._v("binlog 线程")]),t._v("  ：负责将主服务器上的数据更改写入二进制日志（Binary log）中。")]),t._v(" "),r("li",[r("strong",[t._v("I/O 线程")]),t._v("  ：负责从主服务器上读取二进制日志，并写入从服务器的中继日志（Relay log）。")]),t._v(" "),r("li",[r("strong",[t._v("SQL 线程")]),t._v("  ：负责读取中继日志，解析出主服务器已经执行的数据更改并在从服务器中重放（Replay）。")])]),t._v(" "),r("div",{attrs:{align:"center"}},[r("img",{attrs:{src:"https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/master-slave.png",width:""}})]),r("br"),t._v(" "),r("h3",{attrs:{id:"读写分离"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#读写分离"}},[t._v("#")]),t._v(" 读写分离")]),t._v(" "),r("p",[t._v("主服务器处理写操作以及实时性要求比较高的读操作，而从服务器处理读操作。")]),t._v(" "),r("p",[t._v("读写分离能提高性能的原因在于：")]),t._v(" "),r("ul",[r("li",[t._v("主从服务器负责各自的读和写，极大程度缓解了锁的争用；")]),t._v(" "),r("li",[t._v("从服务器可以使用 MyISAM，提升查询性能以及节约系统开销；")]),t._v(" "),r("li",[t._v("增加冗余，提高可用性。")])]),t._v(" "),r("p",[t._v("读写分离常用代理方式来实现，代理服务器接收应用层传来的读写请求，然后决定转发到哪个服务器。")]),t._v(" "),r("div",{attrs:{align:"center"}},[r("img",{attrs:{src:"https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/master-slave-proxy.png",width:""}})]),r("br"),t._v(" "),r("h2",{attrs:{id:"参考资料"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),r("ul",[r("li",[t._v("BaronScbwartz, PeterZaitsev, VadimTkacbenko, 等. 高性能 MySQL[M]. 电子工业出版社, 2013.")]),t._v(" "),r("li",[t._v("姜承尧. MySQL 技术内幕: InnoDB 存储引擎 [M]. 机械工业出版社, 2011.")]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.jfox.info/20-tiao-mysql-xing-nen-you-hua-de-zui-jia-jing-yan.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("20+ 条 MySQL 性能优化的最佳经验"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"http://blog.720ui.com/2017/mysql_core_09_multi_db_table2/",title:"服务端指南 数据存储篇 | MySQL（09） 分库与分表带来的分布式困境与应对之策",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务端指南 数据存储篇 | MySQL（09） 分库与分表带来的分布式困境与应对之策"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://stackoverflow.com/questions/788829/how-to-create-unique-row-id-in-sharded-databases",target:"_blank",rel:"noopener noreferrer"}},[t._v("How to create unique row ID in sharded databases?"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"http://geekswithblogs.net/shaunxu/archive/2012/01/07/sql-azure-federation-ndash-introduction.aspx",title:"Title of this entry.",target:"_blank",rel:"noopener noreferrer"}},[t._v("SQL Azure Federation – Introduction"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"http://blog.codinglabs.org/articles/theory-of-mysql-index.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 索引背后的数据结构及算法原理"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000008131735",target:"_blank",rel:"noopener noreferrer"}},[t._v("MySQL 性能优化神器 Explain 使用分析"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://medium.com/@jeeyoungk/how-sharding-works-b4dec46b3f6",target:"_blank",rel:"noopener noreferrer"}},[t._v("How Sharding Works"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://tech.meituan.com/dianping_order_db_sharding.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("大众点评订单系统分库分表实践"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://zh.wikipedia.org/wiki/B%2B%E6%A0%91",target:"_blank",rel:"noopener noreferrer"}},[t._v("B + 树"),r("OutboundLink")],1)])])])}),[],!1,null,null,null);r.default=n.exports}}]);